# Copyright (c) HashiCorp, Inc.
# SPDX-License-Identifier: MPL-2.0

output "vpc_public_subnets" {
  description = "IDs of the VPC's public subnets"
  value       = module.vpc.public_subnets
}

# output "ec2_instance_public_ips" {
#   description = "Public IP addresses of EC2 instances"
#   value       = module.ec2_instances[*].public_ip
# }
      Source VPC                                                                       Destination VPC
┌───────────────────────────────────────────────────────┐                     ┌──────────────────────────────────────────────────────────────┐
│                                                       │                     │                                                              │
│   ┌─────────────────────────────────────────────┐     │                     │     ┌────────────────────────────────────────────────────┐   │
│   │    public/private subnet                    │     │                     │     │   public subnet                                    │   │
│   │                                             │     │                     │     │                                                    │   │
│   │     ┌─────────┐                             │     │                     │     │   ┌───────────┐                                    │   │
│   │     │         │Bastion                      │     │                     │     │   │           │ Bastion + DMS replication instance │   │
│   │     │         ├─────────────────────────────┼─────┼─────────────────────┼─────┼─► │           │                                    │   │
│   │     │         │                             │     │                     │     │   │           │                                    │   │
│   │     └─────────┘                             │     │                     │     │   └────────┬──┤                                    │   │
│   │          ▲                                  │     │                     │     │            │┼┼┼──────┐                             │   │
│   └──────────┬──────────────────────────────────┘     │                     │     └────────────┴─────────┼─────────────────────────────┘   │
│              │                                        │                     │                            │                                 │
│              │                                        │                     │                            │                                 │
│              │                                        │                     │                            │                                 │
│              │                                        │                     │                            │                                 │
│   ┌──────────┼───────────────────────────────────┐    │                     │     ┌──────────────────────┼─────────────────────────────┐   │
│   │     pvt d│ subnet                            │    │                     │     │     pvt db subnet    │                             │   │
│   │          │                                   │    │                     │     │                      ▼                             │   │
│   │      ┌───┴──────────┐                        │    │                     │     │         ┌──────────────┐                           │   │
│   │      │              │ EC2 w/ MySQL (docker)  │    │                     │     │         │              │ Aurora MySQL              │   │
│   │      │              │                        │    │                     │     │         │              │                           │   │
│   │      │              │                        │    │                     │     │         │              │                           │   │
│   │      └──────────────┘                        │    │                     │     │         │              │                           │   │
│   │                                              │    │                     │     │         ├──────────────┤                           │   │
│   └──────────────────────────────────────────────┘    │                     │     └─────────┴──────────────┴───────────────────────────┘   │
│                                                       │                     │                                                              │
└───────────────────────────────────────────────────────┘                     └──────────────────────────────────────────────────────────────┘